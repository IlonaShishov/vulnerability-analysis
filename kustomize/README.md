# Procedure to Deploy

1. Set all your api keys and tokens in the following command. Note that all the keys are not required.
Look at this [Readme](../README.md) for more details.

```shell
cat > base/secrets.env << EOF
nvd_api_key=you_api_key
serpapi_api_key=your_api_key
tavily_api_key=your_api_key
nvidia_api_key=your_api_key
ghsa_api_key=your_api_key
EOF
```

2. If you don't have namespace , create it
```shell
export YOUR_NAMESPACE_NAME=yourNamespaceNameHere
oc new-project $YOUR_NAMESPACE_NAME
```

3. Create an image pull secret that is authorized to pull agent morpheus image:      
```shell
oc create secret generic morpheus-pull-secret --from-file=.dockerconfigjson=<path/to/.docker/config.json> --type=kubernetes.io/dockerconfigjson
```

4. Deploy agent-morpheus + agent-morpheus-client to your namespace
```shell
oc kustomize overlays/nvidia-llm-service |  oc apply -f - -n $YOUR_NAMESPACE_NAME
```

5. Alternatively, if you want to deploy agent-morpheus with our self-hosted LLM, then run
```shell
# Enable ingress traffic into our LLM Model service in the cluster
oc apply -f network-policy.yaml
# label namespace with application=agent-morpheus to open communication from your namespace to LLM Model service on our Cluster 
oc label namespace $YOUR_NAMESPACE_NAME application=agent-morpheus
# Deploy agent-morpheus integrated with our self-hosted LLM
oc kustomize overlays/our-llm-service |  oc apply -f - -n $YOUR_NAMESPACE_NAME
```
