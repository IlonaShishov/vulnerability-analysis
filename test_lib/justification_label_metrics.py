
from ragas.dataset_schema import SingleTurnSample

class JustificationLabelMetrics:
 
    def __init__(self):

        self.metrics = [
            "Faithfulness",
            "ResponseRelevancy",
            "SummarizationScore",
            # "AspectCritic",
        ]


    def get_datasets(self, data):
        datasets = {}
        for case_id, outputs in data.items():
            dataset = []
            for output in outputs:    
                checklist = [item["response"] for item in output["checklist"]]
                data = {
                    "user_input": "Evaluate how accurately the justification label in the response aligns with the provided contexts and/or reference data.",
                    "response": output["justification"]["label"],
                    "reference": output["summary"],
                    "reference_contexts": [output["summary"]],
                    "retrieved_contexts": checklist
                }
                dataset.append(data)
            datasets[case_id] = dataset
        return datasets
